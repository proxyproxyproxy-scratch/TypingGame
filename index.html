<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="styles.css">
    <title>タイピングラッシュ</title>
  </head>
  <body>
    <section id="section">
      <p id="title"></p>
      <p id="output"></p>
    </section>
    <script>
      function initHTMLstyle(){
        // set section Height & Width
        let section = document.getElementById('section');
        section.style.height = window.innerHeight;
        section.style.width = window.innerWidth;
        // create play button
        let form = document.createElement('form');
        let input = document.createElement('input');
        input.type='button';
        input.value='play';
        input.onclick='initGame()';
        
        section.appendChild(form);
        form.appendChild(input);

        let title = document.getElementById('title');
        title.textContent = 'タイピングラッシュ';
      }
      initHTMLstyle();

      
      let word=['ringo','banana'];
      let loop,count,miss,startTime;
      
      function initGame(num){
        loop=num;
        score=0;
        miss=0;
        mondai=word[Math.floor(Math.random()*word.length)];
        document.getElementById('output').innerHTML = score+"<br>"+mondai;
        document.onkeydown = typingGame;
        startTime=new Date();
      }

      function typingGame(event){
        console.log(event.key);
        if(event.key===mondai[0]){
          mondai=mondai.substr(1,mondai);
          document.getElementById('output').innerHTML = score+'<br>'+mondai;
          if(mondai.length===0){
            score();
            if(loop===0){
              document.getElementById('output').innerHTML = '<FINISH><br>score:'+score;
              //if(document.cookie);
              //document.cookie='score='+score;
              document.onkeydown=null;
              document.getElementById('output').innerHTML = document.getElementById('output')+'<br>スコアを保存しました';
            }else{
              mondai = word[Math.floor(Math.random()*word.length)];
              document.getElementById('output').innerHTML = mondai+score;
            }
          }
        }
      }

      function score(){
        score+=1;
      }
    </script>
  </body>
</html>
